@model Portfolioo.Models.BlogPost

<div class="blog-details-card">
    <h2>@Model.Title</h2>
    <p class="date">@Model.Date.ToString("MMMM dd, yyyy")</p>
    <p>@Model.Content</p>

    <h3>Comments</h3>

    @if (Model.Comments.Any())
    {
        <ul class="comment-list">
            @for (int i = 0; i < Model.Comments.Count; i++)
            {
                var comment = Model.Comments[i];
                <li>
                    <p>
                        <strong>@comment.Text</strong>
                        <span class="comment-date">(@comment.Date.ToString("MMM dd, yyyy hh:mm tt"))</span>
                    </p>

                    @if (comment.Replies.Any())
                    {
                        <ul class="reply-list">
                            @foreach (var reply in comment.Replies)
                            {
                                <li>@reply</li>
                            }
                        </ul>
                    }

                    <!-- Reply form -->
                    @using (Html.BeginForm("AddReply", "Blog", FormMethod.Post))
                    {
                        @Html.Hidden("id", Model.Id)
                        @Html.Hidden("commentIndex", i)
                        <input type="text" name="reply" placeholder="Write a reply..." class="form-control" />
                        <button type="submit" class="btn btn-secondary btn-sm" style="margin-top:5px;">Reply</button>
                    }
                </li>
            }
        </ul>
    }
    else
    {
        <p>No comments yet.</p>
    }

    <!-- Add Comment -->
    <h4>Add a Comment</h4>
    @using (Html.BeginForm("AddComment", "Blog", FormMethod.Post))
    {
        @Html.Hidden("id", Model.Id)
        <textarea name="comment" placeholder="Write a comment..." class="form-control"></textarea>
        <br />
        <button type="submit" class="btn btn-primary">Add Comment</button>
    }
</div>

<style>
    .blog-details-card {
        background-color: #ffe4e9;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

        .blog-details-card h2 {
            color: #880e4f;
            font-weight: bold;
        }

        .blog-details-card .date, .comment-date {
            font-size: 0.85em;
            color: #555;
        }

    .comment-list {
        list-style: none;
        padding-left: 0;
       
        
    }

        .comment-list li {
            background: #fff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 5px;
            border: 1px solid #ddd;
        }

    .reply-list {
        list-style: none;
        padding-left: 10px;
        margin-top: 5px;
        
    }

        .reply-list li {
            background: #f0f0f0;
            padding: 5px;
            border-radius: 5px;
            margin-bottom: 5px;
        }
</style>
